# HW07 hibernate mapping 방식 비교 xml vs annotation

## HBM(Hibernate Mapping) XML 방식

- 정의 : XML 파일에 매핑 정보를 설정함 -> 엔티티 클래스에 매핑 정보가 없음
  (엔티티와 매핑 정보를 분리함.)
- 장점 : 독립적이므로 코드를 따로 쓸 수 있고,
  매핑 변화 시 기존 코드는 고치지 않고, 매핑 정보만 변경하여 적용할 수 있어 유연성을 가짐.
- 단점 : HBM만 공개하거나 OR 자바 코드만 공개하거나
  즉, 코드 공개를 단계적으로 할 수 있어 프로젝트의 전체 그림을 파악 못하게 할 수 있다. , SI나 서비스 개발 분야의 유지보수 담당자 입장에선 한번에 파악하는 게 어려울 수 있다.
- 방법: 아래 코드 참조

```
// 1. 엔티티 클래스 생성
package model;

public class Employee{
    private long id;
    private String name;

    public long getId(){
        return id;
    }
    public void setId(long id){
        this.id = id;
    }
    public String getName(){
        return name;
    }
    public void setName(String name){
        this.name = name;
    }
}

// 2. model패키지의 employee 클래스 를 DB TABLE에 매핑(Employee.hbm.xml)
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="model">
    <class name="Employee" table="Employees">
        <id name="id" column="id">
            <generator class="native"/>
        </id>
    <property name="name" column="name" />
    <property name="age" column="age" />
    <property name="salary" column="salary" />
    </class>
</hibernate-mapping>

// 3. (hibernate.cfg.xml)
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="dialect">org.hibernate.dialect.MySQLDialect
        </property>
        <property name="show_sql">true
        </property>
    </session-factory>
</hibernate-configuration>
```

## JPA 표준으로 사용되는 Annotation 방식

- 정의 : 엔티티 클래스에 매핑 정보가 존재(엔티티와 매핑 정보를 분리 하지 않음.)
- 장점 : HBM XML 방식보다는 유지보수가 쉽다.
- 단점 : HBM XML 방식보다는 보안성과 유연성이 떨어진다.
- 방법 : 아래 코드

```
// 1. 엔티티 클래스 생성
package model;

import javax.persistence.*;
import java.io.Serializable;

@Entity
@Table(name = "Employees")
public class Employee implements Serializable{
    @id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;
    @Column
    private String name;

    public Employee(){
        public long getId(){
            return id;
        }
        public void setId(long id){
            this.id = id;
        }
        public string getName(){
            return name;
        }
        public void setName(String name){
            this.name = name;
        }
    @Override
    public String toString(){
        return "Employee{"+
        "id=" + id + ", name=" + name}
    };

    }
}
```

### 결론

- 유지보수를 중요시 하는 업무라면 annotation 방식을 사용하고 ,
  유연성과 보안성을 중요시 하는 업무라면 HBM XML 파일 방식을 사용합시다.
