# Daytime protocol
- daytime protocol은 1983년 RFC867에 정의된 인터넷 프로토콜 스위트의 서비스다. 
- 컴퓨터 네트워크에서 테스트 , 측정을 목적으로 함.
- Host는 TCP또는 UDP 포트 13에서 Daytime protocol을 지원하는 서버에 연결할 수 있다.
- 서버는 혀재 날짜 및 시간의 ascii 문자열을 지정되지 않은 형식으로 반환함.

# DNS Query packet
- 주소 참조 : https://youngq.tistory.com/56

# TCP header
## Source Port(16bit) , Destination Port(16bit) : 송신자와 수신자의 포트번호 
- 0~65536 중 하나의 포트를 사용함.

## Sequence Number : 데이터의 고유한 번호 
#### 32bit
- SYN Flag를 설정했을떄 사용되는 번호이다.
- TCP는 데이터를 보낼 때마다 데이터에 고유한 번호를 부여함.
이 번호를 사용해서 수신자가 중복된 데이터를 폐기하거나 순서가 뒤바뀌어 수신됐을때 데이터를 순서대로 재구성할 수 있다.
#### ISN(Initial Sequence Number)
- TCP는 새로운 연결을 할 떄마다 새로운 sequence number를 사용하는데 여기서 최초로 랜덤하게 골라서 보내지는게 ISN이다.
- ISN은 0부터 4294967295까지 아무 값이나 될 수 있다.

#### MSL(Maximum Segment Lifetime)
- 네트워크에서 패킷이 살아있는 시간 , ip의 TTL과 비슷함.
- 이 시간이 지나면 라우터에서 패킷을 폐기함.

## Acknowlegment Number(32bit) : 데이터 수신 응답 번호
- 여기서 3way-handshaking 을 떠올리자
- 송신자가 처음으로 연결을 확립하는 요청을 할 때 SYN을 랜덤하게 골라서 보내고나면, 수신자는 송신자가 보낸 SYN에다가 +1 한 값을 ACK Number로 보낸다. 이것은 송신자가 직전에 보낸 패킷을 잘 받았다는 의미다.
- +1을 하는 이유는 , 그래야 무슨 패킷을 잘 받았다는 건지 알 수 있기 때문이다. 

## Data Offset(4bit) : TCP 헤더의 크기 값, 즉 데이터의 시작 위치
- 헤더가 끝나면 데이터가 시작되니까 당연히 위 두개는 같은 말이됨

## Reserved(3bit) : 차후의 사용을 위해 예약된 필드
- 미래를 위해 만들어놓은 예약 필드로, 항상 0으로 설정되어있어야 함.

## Flags(9bit) : 세그먼트의 용도와 내용을 결정하는 플래그
#### PSH
- 수신자에게 버퍼링된 데이터를 푸시할 지 여부를 가르킴
#### RST 
- 커넥션을 리셋하겠다는 의미로 , 이게 1로 되있는 세그먼트를 받으면 즉시 연결을 끊음.
#### ACK 
- 클라이언트가 보낸 최초의 SYN 패킷 이후에 전송되는 모든 패킷에 설정되있어야 하지만, SYN은 양쪽이 최초에 보낸 패킷에만 설정되어 있어야함.
#### FIN
- 더이상 보낼 데이터가 없다는 것을 의미함. 연결 종료과정인 4-way handshaking때 이비트를 사용

## Window Size(16bit) : 수신하고자 하는 윈도우의 크기
- 이건 수신 프로세스가 수신할 수 있는 바이트 수를 의미함.
- TCP의 흐름제어 메커니즘인 Sliding window에서 사용되는 것
- 수신자가 너무 많은 데이터를 받아서 감당하기 어려울 경우엔 이 사이즈를 줄임.
- 송신자는 해당 사이즈 만큼만 데이터를 전송해야함

## Checksum(16bit) : 오류 검출을 위해 사용되는 필드
- 헤더 및 데이터를 16bit 단위로 분할하여 비트 합을 구한 뒤 여기에 1의 보수를 취한 값
- 송신자는 이 알고리즘에 의해 계산된 체크섬을 이 필드에 삽입하고, 수신자는 같은 알고리즘으로 계산해서 동일한지 확인함.
- 만약 비트 합 계산 중 carry가 발생되면 wrap around를 적용함.

## Urgent Pointer(16bit) : 긴급 데이터가 시작되는 위치
- flags에서 URG Flag가 설정된 경우에만 사용함.
- 일반 데이터 내에서 주요한, 긴급한 데이터가 시작되는 위치를 가르키는 필드다.

## Options(0~40byte) : TCP 기능을 확장할 때 사용



# UDP Header
## Source port / Destination Port
- Source port는 송신 / destination port는 수신 측

## UDP Length
- 헤더와 데이터를 합한 UDP의 전체 길이를 정의함

## CheckSum 
- 오류를 탐지하기 위해 사용함.

